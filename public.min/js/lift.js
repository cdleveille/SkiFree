export default class Lift{constructor(i){this.game=i,this.liftSpeed=50,this.liftX=100,this.liftChairSpacing=500,this.liftTowerSpacing=1e3,this.images=[]}init(){this.liftTowers=[{x:this.liftX,y:0,hasCollided:!1}],this.liftChairsDown=[{x:this.liftX-18,y:0}],this.liftChairsUp=[{x:this.liftX+24,y:0,passengers:this.game.util.randomInt(1,3)}]}loadAssets(){this.lift_tower=this.game.util.loadImage("/img/lift_tower.png",this),this.lift_tower_top=this.game.util.loadImage("/img/lift_tower_top.png",this),this.lift_chair_up1=this.game.util.loadImage("/img/lift_chair_up1.png",this),this.lift_chair_up2=this.game.util.loadImage("/img/lift_chair_up2.png",this),this.lift_chair_down=this.game.util.loadImage("/img/lift_chair_down.png",this)}update(i){for(let t=0;t<this.liftTowers.length;t++){let s=this.liftTowers[t];this.game.isGameObjectCollidingWithSkier({x:s.x,y:s.y,hbXOffset:10,hbYOffset:50,hbWidth:11,hbHeight:11})&&this.game.skier.jumpOffset<62&&this.game.collisionsEnabled&&!s.hasCollided&&(this.game.skier.isCrashed=!0,s.hasCollided=!0,this.game.style=0);for(let i=0;i<this.game.otherSkiers.length;i++){let t=this.game.otherSkiers[i];!t.isCrashed&&this.game.isGameObjectCollidingWithOtherSkier(t,{x:s.x,y:s.y,hbXOffset:10,hbYOffset:50,hbWidth:11,hbHeight:11})&&this.game.collisionsEnabled&&this.game.crashOtherSkierOnCollision(t)}for(let i=0;i<this.game.snowboarders.length;i++){let t=this.game.snowboarders[i];!t.isCrashed&&this.game.isGameObjectCollidingWithOtherSkier(t,{x:s.x,y:s.y,hbXOffset:10,hbYOffset:50,hbWidth:11,hbHeight:11})&&this.game.collisionsEnabled&&this.game.crashSnowboarderOnCollision(t)}s.x-=this.game.skier.xv*i,s.y-=this.game.skier.yv*i}for(let t=0;t<this.liftChairsDown.length;t++){let s=this.liftChairsDown[t];s.x-=this.game.skier.xv*i,s.y-=(this.game.skier.yv-this.liftSpeed)*i}for(let t=0;t<this.liftChairsUp.length;t++){let s=this.liftChairsUp[t];s.x-=this.game.skier.xv*i,s.y-=(this.game.skier.yv+this.liftSpeed)*i}let t=this.liftTowers[this.liftTowers.length-1],s=this.liftTowers[0];t.y<2*this.game.gameHeight/3&&t.y>-this.game.gameHeight/3-62?this.liftTowers.push({x:t.x,y:t.y-this.liftTowerSpacing,hasCollided:!1}):t.y<-this.game.gameHeight/3-this.liftTowerSpacing&&this.liftTowers.length>1&&this.liftTowers.splice(this.liftTowers.length-1,1),s.y<2*this.game.gameHeight/3&&s.y>-this.game.gameHeight/3-62&&this.liftTowers.unshift({x:s.x,y:s.y+this.liftTowerSpacing,hasCollided:!1});let h=this.liftChairsDown[this.liftChairsDown.length-1],e=this.liftChairsDown[0];h.y<2*this.game.gameHeight/3&&h.y>-this.game.gameHeight/3-30?this.liftChairsDown.push({x:h.x,y:h.y-this.liftChairSpacing}):h.y<-this.game.gameHeight/3-30-this.liftChairSpacing&&(this.liftChairsDown.splice(this.liftChairsDown.length-1,1),this.liftChairsDown.unshift({x:e.x,y:e.y+this.liftChairSpacing})),e.y<2*this.game.gameHeight/3&&e.y>-this.game.gameHeight/3-30?this.liftChairsDown.unshift({x:e.x,y:e.y+this.liftChairSpacing}):e.y>2*this.game.gameHeight/3+this.liftChairSpacing&&this.liftChairsDown.length>1&&this.liftChairsDown.splice(0,1);let a=this.liftChairsUp[this.liftChairsUp.length-1],l=this.liftChairsUp[0];l.y<2*this.game.gameHeight/3&&l.y>-this.game.gameHeight/3-32&&this.liftChairsUp.unshift({x:l.x,y:l.y+this.liftChairSpacing,passengers:this.game.util.randomInt(1,3)}),a.y<2*this.game.gameHeight/3&&a.y>-this.game.gameHeight/3-32?this.liftChairsUp.push({x:a.x,y:a.y-this.liftChairSpacing,passengers:this.game.util.randomInt(0,2)}):a.y<-this.game.gameHeight/3-32-this.liftChairSpacing&&this.liftChairsUp.length>1&&this.liftChairsUp.splice(this.liftChairsUp.length-1,1)}drawTowersAbovePlayer(i){for(let t=0;t<this.liftTowers.length;t++)this.liftTowers[t].y<-38&&i.drawImage(this.lift_tower,this.game.skier.x+this.liftTowers[t].x,this.game.skier.y+this.liftTowers[t].y)}drawTowersBelowPlayer(i){for(let t=0;t<this.liftTowers.length;t++)this.liftTowers[t].y>=-38&&i.drawImage(this.lift_tower,this.game.skier.x+this.liftTowers[t].x,this.game.skier.y+this.liftTowers[t].y)}drawTowerTops(i){for(let t=0;t<this.liftTowers.length;t++)i.drawImage(this.lift_tower_top,this.game.skier.x+this.liftTowers[t].x,this.game.skier.y+this.liftTowers[t].y)}drawChairs(i){for(let t=0;t<this.liftChairsDown.length;t++)i.drawImage(this.lift_chair_down,this.game.skier.x+this.liftChairsDown[t].x,this.game.skier.y+this.liftChairsDown[t].y);for(let t=0;t<this.liftChairsUp.length;t++){let s=this.lift_chair_up1;2==this.liftChairsUp[t].passengers&&(s=this.lift_chair_up2),i.drawImage(s,this.game.skier.x+this.liftChairsUp[t].x,this.game.skier.y+this.liftChairsUp[t].y)}}drawCables(i){i.fillStyle="#333333",i.fillRect(this.game.skier.x+this.liftTowers[0].x+1,this.game.skier.y-this.game.gameHeight/3,1,this.game.gameHeight),i.fillRect(this.game.skier.x+this.liftTowers[0].x+30,this.game.skier.y-this.game.gameHeight/3,1,this.game.gameHeight)}}