export default class InputHandler{constructor(e,i){if(i.util.isOnMobile())e.addEventListener("touchstart",s=>{if(s.preventDefault(),!i.isPaused){i.touchStartTime=i.util.timestamp();let t=s.touches[0];i.mousePos.x=t.clientX-(window.innerWidth-e.width)/2,i.mousePos.y=t.clientY-(window.innerHeight-e.height)/2,i.skier.isCrashed&&(i.skier.isCrashed=!1)}}),e.addEventListener("touchmove",s=>{if(s.preventDefault(),!i.isPaused){let t=s.touches[0];i.mousePos.x=t.clientX-(window.innerWidth-e.width)/2,i.mousePos.y=t.clientY-(window.innerHeight-e.height)/2}}),e.addEventListener("touchend",e=>{e.preventDefault(),i.isPaused||i.util.timestamp()-i.touchStartTime<200&&(i.skier.isCrashed||(i.skier.isJumping?i.skier.rotateJumpStage():(i.skier.isJumping=!0,i.skier.jumpV=i.skier.jumpVInit)))});else{e.addEventListener("mousemove",s=>{i.mousePos.x=s.clientX-(window.innerWidth-e.width)/2,i.mousePos.y=s.clientY-(window.innerHeight-e.height)/2}),e.addEventListener("mousedown",e=>{i.isPaused||(0==e.button?!i.skier.isCrashed&&i.skier.isJumping&&i.skier.rotateJumpStage():2!=e.button||i.skier.trick1Disabled||!i.skier.isCrashed&&i.skier.isJumping&&(i.skier.isDoingTrick1=!0,i.skier.trick1Disabled=!0,i.skier.trick1StartTime=i.util.timestamp()))}),e.addEventListener("mouseup",e=>{i.isPaused||(0==e.button?i.skier.isCrashed?i.skier.isStopped&&(i.skier.isCrashed=!1):i.skier.isJumping||(i.skier.isJumping=!0,i.skier.jumpV=i.skier.jumpVInit):2==e.button&&(i.skier.isDoingTrick1=!1,i.skier.trick1EndTime=i.util.timestamp()))});let s=65,t=68,r=80,n=82;document.addEventListener("keydown",e=>{switch(e.keyCode){case s:i.skier.isStopped&&(i.skier.isSkatingLeft=!0);break;case t:i.skier.isStopped&&(i.skier.isSkatingRight=!0)}}),document.addEventListener("keyup",e=>{switch(e.keyCode){case s:i.skier.isSkatingLeft=!1;break;case t:i.skier.isSkatingRight=!1;break;case r:i.isPaused?(i.startTime+=i.util.timestamp()-i.timePausedAt,i.isPaused=!1):(i.drawIsPaused=!1,i.timePausedAt=i.util.timestamp(),i.isPaused=!0);break;case n:i.init()}})}}}